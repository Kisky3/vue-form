{"remainingRequest":"/Users/kou/Desktop/vue-form/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kou/Desktop/vue-form/src/pages/ItemInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kou/Desktop/vue-form/src/pages/ItemInformation.vue","mtime":1580344842337},{"path":"/Users/kou/Desktop/vue-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kou/Desktop/vue-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kou/Desktop/vue-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kou/Desktop/vue-form/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgSW1hZ2VVcGxvYWQgZnJvbSAiLi8uLi9jb21wb25lbnRzL21vbGVjdWxlcy9JbWFnZVVwbG9hZCI7CmltcG9ydCBSZXF1aXJlVGFnIGZyb20gIi4vLi4vY29tcG9uZW50cy9hdG9tcy9SZXF1aXJlVGFnIjsKaW1wb3J0IE9wdGlvblRhZyBmcm9tICIuLy4uL2NvbXBvbmVudHMvYXRvbXMvT3B0aW9uVGFnIjsKaW1wb3J0IFRleHRhcmVhTW9kZWwgZnJvbSAiLi8uLi9jb21wb25lbnRzL2F0b21zL1RleHRhcmVhTW9kZWwiOwppbXBvcnQgSW5wdXRNb2RlbCBmcm9tICIuLy4uL2NvbXBvbmVudHMvYXRvbXMvSW5wdXRNb2RlbCI7CmltcG9ydCBJdGVtQ2F0ZWdvcmllcyBmcm9tICIuLy4uL2NvbXBvbmVudHMvbW9sZWN1bGVzL0l0ZW1DYXRlZ29yaWVzIjsKaW1wb3J0IE5leHRCdG4gZnJvbSAiLi8uLi9jb21wb25lbnRzL2F0b21zL05leHRCdG4iOwppbXBvcnQgeyBleHRlbmQsIFZhbGlkYXRpb25Qcm92aWRlciwgVmFsaWRhdGlvbk9ic2VydmVyIH0gZnJvbSAidmVlLXZhbGlkYXRlIjsKaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICJ2ZWUtdmFsaWRhdGUvZGlzdC9ydWxlcyI7CgovKiDlv4XpoIjpoIXnm67jga7jgqjjg6njg7zjg6Hjg4Pjgrvjg7zjgrjoqK3lrpogKi8KcmVxdWlyZWQubWVzc2FnZSA9ICJ7X2ZpZWxkX33jgpLpgbjmip7jgZfjgabjgY/jgaDjgZXjgYQiOwpleHRlbmQoInJlcXVpcmVkIiwgcmVxdWlyZWQpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJdGVtSW5mb3JtYXRpb24iLAogIHByb3BzOiBbIml0ZW1faWQiXSwKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZVVwbG9hZCwKICAgIElucHV0TW9kZWwsCiAgICBUZXh0YXJlYU1vZGVsLAogICAgSXRlbUNhdGVnb3JpZXMsCiAgICBSZXF1aXJlVGFnLAogICAgT3B0aW9uVGFnLAogICAgTmV4dEJ0biwKICAgIFZhbGlkYXRpb25PYnNlcnZlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1JbmRleDogdGhpcy4kcm91dGUucXVlcnkuaXRlbV9pZCA/IHRoaXMuJHJvdXRlLnF1ZXJ5Lml0ZW1faWQgOiAwLAogICAgICBidG5NZXNzYWdlOiAi5qyh44G4IiwKICAgICAgaW5pdGlhbEl0ZW1EYXRhOiB7CiAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgY2F0X2x2bDA6IG51bGwsCiAgICAgICAgY2F0X2x2bDE6IG51bGwsCiAgICAgICAgY2F0X2x2bDI6IG51bGwsCiAgICAgICAgaXRlbV9jb21tZW50OiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGltYWdlTGlzdDogIml0ZW1JbmZvcm1hdGlvbi9nZXRJbWFnZUxpc3QiLAogICAgICBpdGVtTGlzdDogIml0ZW1JbmZvcm1hdGlvbi9nZXRJdGVtTGlzdCIKICAgIH0pLAogICAgaXRlbUltYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5pbWFnZUxpc3RbdGhpcy5pdGVtSW5kZXhdOwogICAgfSwKICAgIGl0ZW1EYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5pdGVtTGlzdC5sZW5ndGggPT09IDAKICAgICAgICA/IHRoaXMuaW5pdGlhbEl0ZW1EYXRhCiAgICAgICAgOiB0aGlzLml0ZW1MaXN0W3RoaXMuaXRlbUluZGV4XTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoewogICAgICBzYXZlU3RvcmVJdGVtRGF0YTogIml0ZW1JbmZvcm1hdGlvbi9zYXZlSXRlbUxpc3QiLAogICAgICBzYXZlU3RvcmVJbWFnZURhdGE6ICJpdGVtSW5mb3JtYXRpb24vc2F2ZUltYWdlTGlzdCIKICAgIH0pLAogICAgYXN5bmMgZ29Ub05leHQoKSB7CiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLiRyZWZzLm9ic2VydmVyLnZhbGlkYXRlKCk7CiAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgYXdhaXQgdGhpcy5zYXZlSXRlbURhdGEoKTsKICAgICAgICBhd2FpdCB0aGlzLm9wZW5JdGVtc0xpc3RQYWdlKCk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlSXRlbURhdGEoKSB7CiAgICAgIHRoaXMuaXRlbUxpc3Quc3BsaWNlKHRoaXMuaXRlbUluZGV4LCAxLCB0aGlzLml0ZW1EYXRhKTsKICAgICAgLy8g55Sf5oiQ44GV44KM44Gf5ZWG5ZOB44OH44O844K/44KSc3RvcmXjgavkv53lrZjjgZnjgosKICAgICAgdGhpcy5zYXZlU3RvcmVJdGVtRGF0YSh0aGlzLml0ZW1MaXN0KTsKICAgIH0sCiAgICBzYXZlSXRlbUltYWdlKCkgewogICAgICAvLyDnlJ/miJDjgZXjgozjgZ/llYblk4Hjg4fjg7zjgr/jgpJzdG9yZeOBq+S/neWtmOOBmeOCiwogICAgICB0aGlzLnNhdmVTdG9yZUltYWdlRGF0YSgKICAgICAgICB0aGlzLmltYWdlTGlzdC5zcGxpY2UodGhpcy5pdGVtSW5kZXgsIDEsIHRoaXMuaXRlbUltYWdlKQogICAgICApOwogICAgfSwKICAgIG9wZW5JdGVtc0xpc3RQYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgKICAgICAgICAiaXRlbXNfbGlzdCIsCiAgICAgICAgKCkgPT4ge30sCiAgICAgICAgKCkgPT4ge30KICAgICAgKTsKICAgIH0sCiAgICBjaGFuZ2VDYXRMdmwwKGNhdEx2bDApIHsKICAgICAgdGhpcy5pdGVtRGF0YS5jYXRfbHZsMCA9IGNhdEx2bDA7CiAgICB9LAogICAgY2hhbmdlQ2F0THZsMShjYXRMdmwxKSB7CiAgICAgIHRoaXMuaXRlbURhdGEuY2F0X2x2bDEgPSBjYXRMdmwxOwogICAgfSwKICAgIGNoYW5nZUNhdEx2bDIoY2F0THZsMikgewogICAgICB0aGlzLml0ZW1EYXRhLmNhdF9sdmwyID0gY2F0THZsMjsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["ItemInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ItemInformation.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <validation-observer\n    ref=\"observer\"\n    v-slot=\"{ invalid }\"\n    @submit.prevent=\"goToNext()\"\n  >\n    <div class=\"c-page-container\">\n      <div class=\"c-page-title\">\n        <p>商品 {{ itemIndex + 1 }} 情報</p>\n      </div>\n      <div class=\"c-page-row\">\n        <div class=\"c-page-subtitle\">\n          <p>写真</p>\n          <require-tag />\n        </div>\n        <div class=\"c-photo-row\">\n          <div v-for=\"(image, index) in itemImage\" :key=\"index\">\n            <image-upload\n              :image=\"image\"\n              :index=\"index\"\n              :itemIndex=\"itemIndex\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"c-page-row\">\n        <div class=\"c-page-subtitle\">\n          <p>商品名</p>\n          <require-tag />\n        </div>\n        <input-model\n          v-model=\"itemData.title\"\n          type=\"text\"\n          placeholder=\"例）SHARP 40インチTV\"\n          value=\"value\"\n          name=\"item-name\"\n        />\n      </div>\n\n      <div class=\"c-page-row\">\n        <div class=\"c-page-subtitle\">\n          <p>カテゴリー</p>\n          <require-tag />\n        </div>\n        <item-categories\n          :itemData=\"itemData\"\n          @submitCatLvl0=\"changeCatLvl0\"\n          @submitCatLvl1=\"changeCatLvl1\"\n          @submitCatLvl2=\"changeCatLvl2\"\n        />\n      </div>\n\n      <div class=\"c-page-row up\">\n        <div class=\"c-page-subtitle\">\n          <p>付属品</p>\n          <option-tag />\n        </div>\n        <textarea-model\n          v-model=\"itemData.item_comment\"\n          placeholder=\"付属品の内容を記入ください\"\n          name=\"item-accessories\"\n          :rows=\"3\"\n          value=\"value\"\n        />\n      </div>\n      <next-btn\n        @goToNext=\"goToNext()\"\n        :message=\"btnMessage\"\n        :class=\"invalid ? 'disabled' : ''\"\n      />\n    </div>\n  </validation-observer>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport { mapActions } from \"vuex\";\nimport ImageUpload from \"./../components/molecules/ImageUpload\";\nimport RequireTag from \"./../components/atoms/RequireTag\";\nimport OptionTag from \"./../components/atoms/OptionTag\";\nimport TextareaModel from \"./../components/atoms/TextareaModel\";\nimport InputModel from \"./../components/atoms/InputModel\";\nimport ItemCategories from \"./../components/molecules/ItemCategories\";\nimport NextBtn from \"./../components/atoms/NextBtn\";\nimport { extend, ValidationProvider, ValidationObserver } from \"vee-validate\";\nimport { required } from \"vee-validate/dist/rules\";\n\n/* 必須項目のエラーメッセージ設定 */\nrequired.message = \"{_field_}を選択してください\";\nextend(\"required\", required);\n\nexport default {\n  name: \"ItemInformation\",\n  props: [\"item_id\"],\n  components: {\n    ImageUpload,\n    InputModel,\n    TextareaModel,\n    ItemCategories,\n    RequireTag,\n    OptionTag,\n    NextBtn,\n    ValidationObserver\n  },\n  data() {\n    return {\n      itemIndex: this.$route.query.item_id ? this.$route.query.item_id : 0,\n      btnMessage: \"次へ\",\n      initialItemData: {\n        title: null,\n        cat_lvl0: null,\n        cat_lvl1: null,\n        cat_lvl2: null,\n        item_comment: null\n      }\n    };\n  },\n  computed: {\n    ...mapGetters({\n      imageList: \"itemInformation/getImageList\",\n      itemList: \"itemInformation/getItemList\"\n    }),\n    itemImage() {\n      return this.imageList[this.itemIndex];\n    },\n    itemData() {\n      return this.itemList.length === 0\n        ? this.initialItemData\n        : this.itemList[this.itemIndex];\n    }\n  },\n  methods: {\n    ...mapActions({\n      saveStoreItemData: \"itemInformation/saveItemList\",\n      saveStoreImageData: \"itemInformation/saveImageList\"\n    }),\n    async goToNext() {\n      const isValid = await this.$refs.observer.validate();\n      if (isValid) {\n        await this.saveItemData();\n        await this.openItemsListPage();\n      }\n    },\n    saveItemData() {\n      this.itemList.splice(this.itemIndex, 1, this.itemData);\n      // 生成された商品データをstoreに保存する\n      this.saveStoreItemData(this.itemList);\n    },\n    saveItemImage() {\n      // 生成された商品データをstoreに保存する\n      this.saveStoreImageData(\n        this.imageList.splice(this.itemIndex, 1, this.itemImage)\n      );\n    },\n    openItemsListPage() {\n      this.$router.push(\n        \"items_list\",\n        () => {},\n        () => {}\n      );\n    },\n    changeCatLvl0(catLvl0) {\n      this.itemData.cat_lvl0 = catLvl0;\n    },\n    changeCatLvl1(catLvl1) {\n      this.itemData.cat_lvl1 = catLvl1;\n    },\n    changeCatLvl2(catLvl2) {\n      this.itemData.cat_lvl2 = catLvl2;\n    }\n  }\n};\n</script>\n<style>\n.c-photo-row {\n  display: flex;\n  justify-content: start;\n  width: 100%;\n  flex-direction: row;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.c-page-row.up {\n  margin-top: -10px;\n}\n</style>\n"]}]}