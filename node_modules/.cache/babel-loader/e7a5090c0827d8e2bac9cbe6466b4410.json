{"remainingRequest":"/src/node_modules/babel-loader/lib/index.js!/src/node_modules/cache-loader/dist/cjs.js??ref--0-0!/src/node_modules/vue-loader/lib/index.js??vue-loader-options!/src/src/pages/Photo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/src/src/pages/Photo.vue","mtime":1582822556000},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":1583055144000},{"path":"/src/node_modules/babel-loader/lib/index.js","mtime":1583055144000},{"path":"/src/node_modules/cache-loader/dist/cjs.js","mtime":1583055144000},{"path":"/src/node_modules/vue-loader/lib/index.js","mtime":1583055150000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvc3JjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFByb2Nlc3NCYXIgZnJvbSAiLi4vY29tcG9uZW50cy9tb2xlY3VsZXMvUHJvY2Vzc2JhciI7CmltcG9ydCBsYW1iZGEgZnJvbSAiLi4vYXBpL2xhbWJkYSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGhvdG8iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvck1zZzogIiIsCiAgICAgIHNob3dFcnJvck1zZzogZmFsc2UsCiAgICAgIHN0ZXA6IDAsCiAgICAgIGltYWdlS2V5OiBudWxsLAogICAgICBpbml0aWFsSXRlbURhdGE6IHsKICAgICAgICB0aXRsZTogbnVsbCwKICAgICAgICBpbWFnZXM6IHt9LAogICAgICAgIGNhdF9sdmwwOiBudWxsLAogICAgICAgIGNhdF9sdmwxOiBudWxsLAogICAgICAgIGNhdF9sdmwyOiBudWxsLAogICAgICAgIGl0ZW1fY29tbWVudDogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgUHJvY2Vzc0JhcjogUHJvY2Vzc0JhcgogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgaW1hZ2VEYXRhOiAiaXRlbUluZm9ybWF0aW9uL2dldEltYWdlRGF0YSIsCiAgICBpbWFnZUxpc3Q6ICJpdGVtSW5mb3JtYXRpb24vZ2V0SW1hZ2VMaXN0IiwKICAgIGl0ZW1MaXN0OiAiaXRlbUluZm9ybWF0aW9uL2dldEl0ZW1MaXN0IgogIH0pLCB7CiAgICBpdGVtRGF0YTogZnVuY3Rpb24gaXRlbURhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmluaXRpYWxJdGVtRGF0YTsKICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIHNhdmVTdG9yZUltYWdlRGF0YTogIml0ZW1JbmZvcm1hdGlvbi9zYXZlSW1hZ2VEYXRhIiwKICAgIHNhdmVTdG9yZUl0ZW1EYXRhOiAiaXRlbUluZm9ybWF0aW9uL3NhdmVJdGVtTGlzdCIsCiAgICBzYXZlU3RvcmVJbWFnZUxpc3Q6ICJpdGVtSW5mb3JtYXRpb24vc2F2ZUltYWdlTGlzdCIKICB9KSwgewogICAgc2F2ZUltYWdlRGF0YTogZnVuY3Rpb24gc2F2ZUltYWdlRGF0YShpbWFnZSwgaW5kZXgpIHsKICAgICAgLyog5ZCE5ZWG5ZOB44Gu55S75YOP44Kq44OW44K444Kn44Kv44OI44Gr5L+d5a2YICovCiAgICAgIHRoaXMuaW1hZ2VEYXRhLnNwbGljZShpbmRleCwgMSwgaW1hZ2UpOwogICAgICB0aGlzLnNhdmVTdG9yZUltYWdlRGF0YSh0aGlzLmltYWdlRGF0YSk7CiAgICAgIC8qIOWFqOS9k+OBruWVhuWTgeOCpOODoeODvOOCuOODquOCueODiOOBq+S/neWtmOOBmeOCiyAqLwoKICAgICAgdGhpcy5pbWFnZUxpc3Quc3BsaWNlKDAsIDEsIHRoaXMuaW1hZ2VEYXRhKTsKICAgICAgdGhpcy5zYXZlU3RvcmVJbWFnZUxpc3QodGhpcy5pbWFnZUxpc3QpOwogICAgICAvKiDllYblk4HnmbvpjLLjg5rjg7zjgrjjgavpgbfnp7sgKi8KCiAgICAgIHRoaXMub3Blbkl0ZW1JbmZvcm1hdGlvblBhZ2UoKTsKICAgIH0sCiAgICBzdWJtaXRJbWFnZTogZnVuY3Rpb24gc3VibWl0SW1hZ2UodXBsb2FkX2ZpbGUsIGluZGV4KSB7CiAgICAgIHZhciBwcmVTaWduZWRVcmw7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc3VibWl0SW1hZ2UkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5nZXRQcmVzaWduZWRVcmwodXBsb2FkX2ZpbGUpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBwcmVTaWduZWRVcmwgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy51cGxvYWRTMyhwcmVTaWduZWRVcmwsIHVwbG9hZF9maWxlKSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgdGhpcy5pbWFnZUtleSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5zYXZlSW1nS2V5KGluZGV4LCB0aGlzLmltYWdlS2V5KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgdXBsb2FkUzM6IGZ1bmN0aW9uIHVwbG9hZFMzKHByZVNpZ25lZFVybCwgdXBfZmlsZSkgewogICAgICB2YXIgaGVhZGVycywgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gdXBsb2FkUzMkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgLyogaGVhZGVyc+OBp+OCouODg+ODl+ODreODvOODieOBl+OBn+eUu+WDj+OBrkNvbnRlbnQgVHlwZeOCkuioreWumuOBmeOCiyAqLwogICAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogdXBfZmlsZS50eXBlCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChheGlvcy5wdXQocHJlU2lnbmVkVXJsLCB1cF9maWxlLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzCiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChwcmVTaWduZWRVcmwgJiYgcHJlU2lnbmVkVXJsLmluZGV4T2YoIj8iKSAhPSAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5pbWFnZUtleSA9IHByZVNpZ25lZFVybC5zcGxpdCgiPyIpWzBdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRoaXMuaW1hZ2VLZXkpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgdGhpcy5zZXRFcnJvck1zZygidXBsb2FkLWZhaWwiKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDIudDApOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMsIFtbMCwgOV1dKTsKICAgIH0sCiAgICBzYXZlSW1nS2V5OiBmdW5jdGlvbiBzYXZlSW1nS2V5KGluZGV4LCBpbWFnZUtleSkgewogICAgICB0aGlzLml0ZW1EYXRhLmltYWdlc1tpbmRleF0gPSBpbWFnZUtleTsKICAgICAgdGhpcy5zYXZlSXRlbURhdGEoKTsKICAgIH0sCiAgICBzYXZlSXRlbURhdGE6IGZ1bmN0aW9uIHNhdmVJdGVtRGF0YSgpIHsKICAgICAgdGhpcy5pdGVtTGlzdC5zcGxpY2UoMCwgMSwgdGhpcy5pdGVtRGF0YSk7IC8vIOeUn+aIkOOBleOCjOOBn+WVhuWTgeODh+ODvOOCv+OCknN0b3Jl44Gr5L+d5a2Y44GZ44KLCgogICAgICB0aGlzLnNhdmVTdG9yZUl0ZW1EYXRhKHRoaXMuaXRlbUxpc3QpOwogICAgfSwKICAgIGdldFByZXNpZ25lZFVybDogZnVuY3Rpb24gZ2V0UHJlc2lnbmVkVXJsKGZpbGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UHJlc2lnbmVkVXJsJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChsYW1iZGEuZ2V0U2lnbmVkVVJMKGZpbGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhLnVybDsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRFcnJvck1zZygidXBsb2FkLWZhaWwiKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZmlsZUNsaWNrOiBmdW5jdGlvbiBmaWxlQ2xpY2soKSB7CiAgICAgICQoIiN1cGxvYWRfZmlsZSIpLmNsaWNrKCk7CiAgICB9LAogICAgb25GaWxlQ2hhbmdlOiBmdW5jdGlvbiBvbkZpbGVDaGFuZ2UoZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwoKICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDAgJiYgZmlsZXMubGVuZ3RoIDw9IDMpIHsKICAgICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlLCBpbmRleCkgewogICAgICAgICAgX3RoaXMyLmNyZWF0ZUltYWdlKGZpbGUsIGluZGV4KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldEVycm9yTXNnKCJleGNlZWQtaW1hZ2UiKTsKICAgICAgfQogICAgfSwKICAgIGNyZWF0ZUltYWdlOiBmdW5jdGlvbiBjcmVhdGVJbWFnZShmaWxlLCBpbmRleCkgewogICAgICB2YXIgcmVhZGVyLCB2bSwgb2JqOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGNyZWF0ZUltYWdlJChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgIHZtID0gdGhpczsKICAgICAgICAgICAgICBvYmogPSB7fTsKCiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBvYmoudGh1bW5haWwgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICBvYmoudXBsb2FkRmlsZSA9IGZpbGU7CiAgICAgICAgICAgICAgICBvYmoubmFtZSA9IGZpbGUubmFtZTsgLy8g44Ki44OD44OX44Ot44O844OJ5oiQ5Yqf44GZ44KM44Gw5L+d5a2Y44GZ44KLCgogICAgICAgICAgICAgICAgaWYgKHZtLmNoZWNrRW1wdHlJbWFnZShvYmopKSB7CiAgICAgICAgICAgICAgICAgIHZtLnNldEVycm9yTXNnKCJuby1pbWFnZSIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdm0uc3VibWl0SW1hZ2UoZmlsZSwgaW5kZXgpOwogICAgICAgICAgICAgICAgICB2bS5zYXZlSW1hZ2VEYXRhKG9iaiwgaW5kZXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgY2hlY2tFbXB0eUltYWdlOiBmdW5jdGlvbiBjaGVja0VtcHR5SW1hZ2UoaW1hZ2UpIHsKICAgICAgcmV0dXJuIGltYWdlLnRodW1uYWlsID09PSAiIiAmJiBPYmplY3Qua2V5cyhpbWFnZS51cGxvYWRGaWxlKS5sZW5ndGggPT09IDAgJiYgaW1hZ2UubmFtZSA9PT0gIiI7CiAgICB9LAogICAgb3Blbkl0ZW1JbmZvcm1hdGlvblBhZ2U6IGZ1bmN0aW9uIG9wZW5JdGVtSW5mb3JtYXRpb25QYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiaXRlbV9pbmZvcm1hdGlvbiIsIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgc2V0RXJyb3JNc2c6IGZ1bmN0aW9uIHNldEVycm9yTXNnKGVyclR5cGUpIHsKICAgICAgc3dpdGNoIChlcnJUeXBlKSB7CiAgICAgICAgY2FzZSAibm8taW1hZ2UiOgogICAgICAgICAgdGhpcy5lcnJvck1zZyA9ICLjgq/jg6rjg4Pjgq/jgZfjgablhpnnnJ/jgpLnmbvpjLLjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImV4Y2VlZC1pbWFnZSI6CiAgICAgICAgICB0aGlzLmVycm9yTXNnID0gIueUu+WDjzPmnprjgb7jgafnmbvpjLLjgZfjgabjgY/jgaDjgZXjgYQiOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgInVwbG9hZC1mYWlsIjoKICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAi55S75YOP44Ki44OD44OX44Ot44O844OJ5aSx5pWX44GX44G+44GX44Gf44CB44KC44GG5LiA5Zue6Kmm44GX44Gm44GP44Gg44GV44GEIjsKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICB0aGlzLnNob3dFcnJvck1zZyA9IHRydWU7CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["Photo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,UAAA,MAAA,oCAAA;AACA,OAAA,MAAA,MAAA,eAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,CAHA;AAIA,MAAA,QAAA,EAAA,IAJA;AAKA,MAAA,eAAA,EAAA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,IAHA;AAIA,QAAA,QAAA,EAAA,IAJA;AAKA,QAAA,QAAA,EAAA,IALA;AAMA,QAAA,YAAA,EAAA;AANA;AALA,KAAA;AAcA,GAjBA;AAkBA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAlBA;AAqBA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,SAAA,EAAA,8BADA;AAEA,IAAA,SAAA,EAAA,8BAFA;AAGA,IAAA,QAAA,EAAA;AAHA,GAAA,CADA;AAMA,IAAA,QANA,sBAMA;AACA,aAAA,KAAA,eAAA;AACA;AARA,IArBA;AA+BA,EAAA,OAAA,oBACA,UAAA,CAAA;AACA,IAAA,kBAAA,EAAA,+BADA;AAEA,IAAA,iBAAA,EAAA,8BAFA;AAGA,IAAA,kBAAA,EAAA;AAHA,GAAA,CADA;AAMA,IAAA,aANA,yBAMA,KANA,EAMA,KANA,EAMA;AACA;AACA,WAAA,SAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,KAAA;AACA,WAAA,kBAAA,CAAA,KAAA,SAAA;AAEA;;AACA,WAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,EAAA,KAAA,SAAA;AACA,WAAA,kBAAA,CAAA,KAAA,SAAA;AACA;;AACA,WAAA,uBAAA;AACA,KAhBA;AAiBA,IAAA,WAjBA,uBAiBA,WAjBA,EAiBA,KAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAkBA,KAAA,eAAA,CAAA,WAAA,CAlBA;;AAAA;AAkBA,cAAA,YAlBA;AAAA;AAAA,8CAmBA,KAAA,QAAA,CAAA,YAAA,EAAA,WAAA,CAnBA;;AAAA;AAmBA,mBAAA,QAnBA;AAoBA,mBAAA,UAAA,CAAA,KAAA,EAAA,KAAA,QAAA;;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA,IAAA,QAtBA,oBAsBA,YAtBA,EAsBA,OAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAwBA;AACA,cAAA,OAzBA,GAyBA;AACA,gCAAA,OAAA,CAAA;AADA,eAzBA;AAAA;AAAA,8CA4BA,KAAA,CAAA,GAAA,CAAA,YAAA,EAAA,OAAA,EAAA;AACA,gBAAA,OAAA,EAAA;AADA,eAAA,CA5BA;;AAAA;AA4BA,cAAA,QA5BA;;AA+BA,kBAAA,YAAA,IAAA,YAAA,CAAA,OAAA,CAAA,GAAA,KAAA,CAAA,CAAA,EAAA;AACA,qBAAA,QAAA,GAAA,YAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA;;AAjCA,gDAkCA,KAAA,QAlCA;;AAAA;AAAA;AAAA;AAoCA,mBAAA,WAAA,CAAA,aAAA;AACA,cAAA,OAAA,CAAA,GAAA;;AArCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwCA,IAAA,UAxCA,sBAwCA,KAxCA,EAwCA,QAxCA,EAwCA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,IAAA,QAAA;AACA,WAAA,YAAA;AACA,KA3CA;AA4CA,IAAA,YA5CA,0BA4CA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,EAAA,KAAA,QAAA,EADA,CAEA;;AACA,WAAA,iBAAA,CAAA,KAAA,QAAA;AACA,KAhDA;AAiDA,IAAA,eAjDA,2BAiDA,IAjDA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAkDA,MAAA,CACA,YADA,CACA,IADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,uBAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,eAJA,EAKA,KALA,CAKA,UAAA,GAAA,EAAA;AACA,gBAAA,KAAA,CAAA,WAAA,CAAA,aAAA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,eARA,CAlDA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4DA,IAAA,SAAA,EAAA,qBAAA;AACA,MAAA,CAAA,CAAA,cAAA,CAAA,CAAA,KAAA;AACA,KA9DA;AA+DA,IAAA,YAAA,EAAA,sBAAA,CAAA,EAAA;AAAA;;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,IAAA,CAAA,CAAA,YAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,CAAA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,IAAA,EAAA,KAAA;AACA,SAFA;AAGA,OAJA,MAIA;AACA,aAAA,WAAA,CAAA,cAAA;AACA;AACA,KAxEA;AAyEA,IAAA,WAzEA,uBAyEA,IAzEA,EAyEA,KAzEA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0EA,cAAA,MA1EA,GA0EA,IAAA,UAAA,EA1EA;AA2EA,cAAA,EA3EA,GA2EA,IA3EA;AA4EA,cAAA,GA5EA,GA4EA,EA5EA;;AA6EA,cAAA,MAAA,CAAA,MAAA,GAAA,UAAA,CAAA,EAAA;AACA,gBAAA,GAAA,CAAA,QAAA,GAAA,CAAA,CAAA,MAAA,CAAA,MAAA;AACA,gBAAA,GAAA,CAAA,UAAA,GAAA,IAAA;AACA,gBAAA,GAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,CAHA,CAKA;;AACA,oBAAA,EAAA,CAAA,eAAA,CAAA,GAAA,CAAA,EAAA;AACA,kBAAA,EAAA,CAAA,WAAA,CAAA,UAAA;AACA,iBAFA,MAEA;AACA,kBAAA,EAAA,CAAA,WAAA,CAAA,IAAA,EAAA,KAAA;AACA,kBAAA,EAAA,CAAA,aAAA,CAAA,GAAA,EAAA,KAAA;AACA;AACA,eAZA;;AAaA,cAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AA1FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4FA,IAAA,eAAA,EAAA,yBAAA,KAAA,EAAA;AACA,aACA,KAAA,CAAA,QAAA,KAAA,EAAA,IACA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,UAAA,EAAA,MAAA,KAAA,CADA,IAEA,KAAA,CAAA,IAAA,KAAA,EAHA;AAKA,KAlGA;AAmGA,IAAA,uBAnGA,qCAmGA;AACA,WAAA,OAAA,CAAA,IAAA,CACA,kBADA,EAEA,YAAA,CAAA,CAFA,EAGA,YAAA,CAAA,CAHA;AAKA,KAzGA;AA0GA,IAAA,WAAA,EAAA,qBAAA,OAAA,EAAA;AACA,cAAA,OAAA;AACA,aAAA,UAAA;AACA,eAAA,QAAA,GAAA,mBAAA;AACA;;AACA,aAAA,cAAA;AACA,eAAA,QAAA,GAAA,gBAAA;AACA;;AACA,aAAA,aAAA;AACA,eAAA,QAAA,GACA,4BADA;AAEA;AAVA;;AAYA,WAAA,YAAA,GAAA,IAAA;AACA;AAxHA;AA/BA,CAAA","sourcesContent":["<template>\n  <div>\n    <process-bar :step=\"step\" />\n    <div class=\"c-page-container\">\n      <div class=\"c-page-title\">\n        <p>商品写真登録</p>\n      </div>\n      <div class=\"c-page-row center\" @click=\"fileClick()\">\n        <label class=\"c-photo-label\"> 60秒で簡単査定!</label>\n        <div class=\"c-photo-wrap\">\n          <!--一旦コメントアウト\n          <img\n            class=\"c-photo-mark\"\n            src=\"../assets/img/image-upload.png\"\n            alt=\"\"\n          />\n          -->\n          <div class=\"c-photo-btn\">\n            <span class=\"iconfont icon-camera\"></span>\n          </div>\n          <div class=\"c-photo-add-btn\">\n            + 商品を追加する\n          </div>\n        </div>\n        <span class=\"error-msg\" v-show=\"showErrorMsg\">{{ errorMsg }}</span>\n        <input\n          id=\"upload_file\"\n          multiple=\"multiple\"\n          type=\"file\"\n          accept=\"image/*\"\n          @change=\"onFileChange($event)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { mapActions } from \"vuex\";\nimport ProcessBar from \"../components/molecules/Processbar\";\nimport lambda from \"../api/lambda\";\nimport axios from \"axios\";\nexport default {\n  name: \"Photo\",\n  data() {\n    return {\n      errorMsg: \"\",\n      showErrorMsg: false,\n      step: 0,\n      imageKey: null,\n      initialItemData: {\n        title: null,\n        images: {},\n        cat_lvl0: null,\n        cat_lvl1: null,\n        cat_lvl2: null,\n        item_comment: null\n      }\n    };\n  },\n  components: {\n    ProcessBar\n  },\n  computed: {\n    ...mapGetters({\n      imageData: \"itemInformation/getImageData\",\n      imageList: \"itemInformation/getImageList\",\n      itemList: \"itemInformation/getItemList\"\n    }),\n    itemData() {\n      return this.initialItemData;\n    }\n  },\n  methods: {\n    ...mapActions({\n      saveStoreImageData: \"itemInformation/saveImageData\",\n      saveStoreItemData: \"itemInformation/saveItemList\",\n      saveStoreImageList: \"itemInformation/saveImageList\"\n    }),\n    saveImageData(image, index) {\n      /* 各商品の画像オブジェクトに保存 */\n      this.imageData.splice(index, 1, image);\n      this.saveStoreImageData(this.imageData);\n\n      /* 全体の商品イメージリストに保存する */\n      this.imageList.splice(0, 1, this.imageData);\n      this.saveStoreImageList(this.imageList);\n      /* 商品登録ページに遷移 */\n      this.openItemInformationPage();\n    },\n    async submitImage(upload_file, index) {\n      let preSignedUrl = await this.getPresignedUrl(upload_file);\n      this.imageKey = await this.uploadS3(preSignedUrl, upload_file);\n      this.saveImgKey(index, this.imageKey);\n    },\n    async uploadS3(preSignedUrl, up_file) {\n      try {\n        /* headersでアップロードした画像のContent Typeを設定する */\n        const headers = {\n          \"content-type\": up_file.type\n        };\n        let response = await axios.put(preSignedUrl, up_file, {\n          headers: headers\n        });\n        if (preSignedUrl && preSignedUrl.indexOf(\"?\") != -1) {\n          this.imageKey = preSignedUrl.split(\"?\")[0];\n        }\n        return this.imageKey;\n      } catch (error) {\n        this.setErrorMsg(\"upload-fail\");\n        console.log(error);\n      }\n    },\n    saveImgKey(index, imageKey) {\n      this.itemData.images[index] = imageKey;\n      this.saveItemData();\n    },\n    saveItemData() {\n      this.itemList.splice(0, 1, this.itemData);\n      // 生成された商品データをstoreに保存する\n      this.saveStoreItemData(this.itemList);\n    },\n    async getPresignedUrl(file) {\n      return await lambda\n        .getSignedURL(file)\n        .then(res => {\n          return res.data.url;\n        })\n        .catch(err => {\n          this.setErrorMsg(\"upload-fail\");\n          console.log(err);\n        });\n    },\n    fileClick: function() {\n      $(\"#upload_file\").click();\n    },\n    onFileChange: function(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length > 0 && files.length <= 3) {\n        files.forEach((file, index) => {\n          this.createImage(file, index);\n        });\n      } else {\n        this.setErrorMsg(\"exceed-image\");\n      }\n    },\n    async createImage(file, index) {\n      var reader = new FileReader();\n      var vm = this;\n      var obj = {};\n      reader.onload = function(e) {\n        obj.thumnail = e.target.result;\n        obj.uploadFile = file;\n        obj.name = file.name;\n\n        // アップロード成功すれば保存する\n        if (vm.checkEmptyImage(obj)) {\n          vm.setErrorMsg(\"no-image\");\n        } else {\n          vm.submitImage(file, index);\n          vm.saveImageData(obj, index);\n        }\n      };\n      reader.readAsDataURL(file);\n    },\n    checkEmptyImage: function(image) {\n      return (\n        image.thumnail === \"\" &&\n        Object.keys(image.uploadFile).length === 0 &&\n        image.name === \"\"\n      );\n    },\n    openItemInformationPage() {\n      this.$router.push(\n        \"item_information\",\n        () => {},\n        () => {}\n      );\n    },\n    setErrorMsg: function(errType) {\n      switch (errType) {\n        case \"no-image\":\n          this.errorMsg = \"クリックして写真を登録してください\";\n          break;\n        case \"exceed-image\":\n          this.errorMsg = \"画像3枚まで登録してください\";\n          break;\n        case \"upload-fail\":\n          this.errorMsg =\n            \"画像アップロード失敗しました、もう一回試してください\";\n          break;\n      }\n      this.showErrorMsg = true;\n    }\n  }\n};\n</script>\n<style></style>\n"],"sourceRoot":"src/pages"}]}